# Виртуальная машина

Основные характеристики виртуальной машины:
- PSW = IP + Flags, 16 + 16 = 32 бит
- Память: слова 32 бита, размер адреса – 16 бит
- Типы данных:  
  - Целые знаковые, беззнаковые – 4 байта  
  - Дробные – 4 байта
- РОН – 32 штуки, 32 бита – целые  
  Они же, 32 бита – дробные
- Структура команды: 2 байта (две команды в слове), 4 байта
  - 16 бит: КОП – 6 бит, r1 – 5 бит, r2 – 5 бит
  - 32 бита: КОП – 6 бит, r1 – 5 бит, r2 – 5 бит, адрес (константа) – 16 бит
- Пересылка:
  - регистр-регистр 
  - память-регистр 
  - регистр-память 
- Загрузка константы-адреса в регистр 
- Арифметика:
  - целая – только на регистрах
  - дробная – только на регистрах
  - результат – в r2
- Переходы:
  - Безусловный прямой: 
    - команда формата-32  
    - r2 = xxxxx – тип перехода  
    - 00001: прямой, IP = адрес (константа) в команде 
    - 00011: прямой, IP = r1+адрес (константа) в команде 
  - Безусловный относительный: 
    - команда формата-16: 
      - смещение = <r1r2>; 
      - IP = IP+смещение
  - Условный — то же самое, только проверяются флаги
  - Вызов подпрограммы — адрес возврата запоминается в r2
  - Возврат – безусловный прямой переход 
